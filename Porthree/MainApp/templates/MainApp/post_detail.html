{% extends 'portfolio_nav.html' %}
{% load static %}
<!-- Custom styles for this page tables -->

{% block title %}{{ post.title }} - {{ user.username }} posts - Porthree{% endblock %}

{% block content %}
<div class="container-fluid">

    <!-- Styling for images, posts, and icons -->
    <style>
        .img-icon {
            width: 24px;
            height: 24px;
        }

        .list-group-item {
            max-width: 100%;
            overflow: hidden;
        }

        /* Add scroll to the card body */
        .card-body-scroll {
            max-height: 400px;
            /* Adjust the max height as needed */
            overflow-y: auto;
        }

        /* Add horizontal scroll for each post */
        .post-content-scroll {
            overflow-x: auto;
        }

        /* Style for the post image */
        .post-image {
            max-width: 100%;
            height: 300px;
            object-fit: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .post-image-title {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.8); /* Light grey background */
            padding: 10px;
            margin: 0;
            color: #333; /* Text color */
        }

        /* Style for the default image */
        .default-image {
            max-width: 100%;
            height: 300px;
            background-color: #4CAF50; /* Green background */
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .default-image-title {
            text-align: center;
            padding: 10px;
            margin: 0;
            color: #fff; /* White text color */
        }

        /* Align created by, created at, and tags horizontally */
        .post-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 10px; /* Adjust as needed */
        }
    </style>

    <!-- Content of the post -->
    <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex flex-wrap justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">Post Details</h6>
        </div>
        <div class="card-body">
            {% if post.post_image %}
                <div class="post-image" style="background-image: url('{{ post.post_image.url }}')">
                    <h1 class="h1 post-image-title">{{ post.title }}</h1>
                </div>
            {% else %}
                <div class="default-image">
                    <h1 class="h1 default-image-title">{{ post.title }}</h1>
                </div>
            {% endif %}
            <div class="post-meta">
                <p>Created by: {{ post.user }}</p>
                <p>Created at: {{ post.created_at|date:"SHORT_DATE_FORMAT" }}</p>
                <p>Liked: {{ post.like }}</p>
                <p>Shared: {{ post.shared }}</p>
                <p>Tags: {% for tag in post.get_post_tags %}{{ tag }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>

            </div>
            <p>{{ post.content|safe }}</p>

        </div>
    </div>

    <!-- Back to Posts link -->
    {% if user.is_authenticated %}
        <!-- Link to create-post endpoint -->
        <a href="{% url 'create-post' %}" class="btn btn-primary">Create a New Post</a>
        <a href="{% url 'edit-post' post.id %}" class="btn btn-primary font-weight-bold">
            Edit This Post</a>
    {% endif %}
    
</div>

{% endblock %}
